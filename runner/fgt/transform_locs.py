# !/usr/bin/env python
# -*-coding:utf-8 -*-
"""
Author     ：YangTao
Time       ：2023/10/17 15:27
"""
import pprint

import maya.cmds as mc
import maya.mel as mel


class TransformLocsExporter():
    def __init__(self, start_frame, end_frame, output_path):
        self.start_frame = start_frame - 3
        self.end_frame = end_frame + 3

        self.output_path = output_path.replace("\\", "/")
        self.ref_locators_file = output_path + '/ref_locators.abc'

        self.locator_asset_map = {}  # {"tianlangxing4:Body_Grp_loc": tianlangxing4_Body_Grp_loc}

    @property
    def reference_locators_group(self):
        # create reference locators group
        if not mc.objExists('ref_locators_grp'):
            return mc.createNode('transform', name='ref_locators_grp')
        else:
            return mc.ls('ref_locators_grp')[0]

    def create_reference_locator(self, asset_node):
        asset_locator_name = asset_node.replace(':', '_') + '_loc'  # tianlangxing4_Body_Grp_loc
        if mc.objExists(asset_locator_name):
            mc.delete(asset_locator_name)
        asset_locator_node = mc.spaceLocator(name=asset_locator_name)[0]
        mc.parent(asset_locator_node, self.reference_locators_group)
        self.locator_asset_map[asset_node] = asset_locator_node

    def object_following(self, current_frame):
        # Object following

        mc.currentTime(current_frame)
        for asset_node, locator_node in self.locator_asset_map.items():
            # Gets the location coordinates
            bbx = mc.xform(asset_node, q=True, bb=True, ws=True)
            translation_data = [(bbx[i] + bbx[i + 3]) / 2 for i in range(3)]
            mc.xform(locator_node, t=translation_data, ws=True)
            for attr in ['tx', 'ty', 'tz']:
                mc.setKeyframe(locator_node + '.' + attr)

    def export_locators(self):
        if not self.locator_asset_map:
            return

        root_str = ''
        for locator_node in self.locator_asset_map.values():
            root_str += ' -root {}'.format(mc.ls(locator_node, long=1)[0])
        export_abc_cmd = "AbcExport -j \"-frameRange %s %s " % (self.start_frame, self.end_frame)
        export_abc_cmd += "-worldSpace -dataFormat ogawa %s -file %s\"" % (root_str, self.ref_locators_file)
        print("Following locators export: ", export_abc_cmd)
        mel.eval(export_abc_cmd)

    def export_reference_locator(self, assets_list):
        print("Following locators export: ", assets_list)
        self.locator_asset_map = {}
        # create reference translation value
        for asset_node in assets_list:
            self.create_reference_locator(asset_node)

        # set locator frame pos
        for f in range(self.start_frame, self.end_frame):
            self.object_following(f)

        # export locators frame
        self.export_locators()

        # delete locator
        if mc.objExists('ref_locators_grp'):
            mc.delete('ref_locators_grp')


def export_locators(output_path):
    tle = TransformLocsExporter(start_frame=int(mc.playbackOptions(q=True, minTime=True)),
                                end_frame=int(mc.playbackOptions(q=True, maxTime=True)),
                                output_path=output_path)

    assets_list = []
    for group in ["|asset|chr", "|asset|prp"]:
        if not mc.objExists(group):
            continue

        nodes = mc.listRelatives(group, c=True)
        if not nodes:
            continue

        for node_object in nodes:
            ns = node_object.split(":")[0]
            for root_node in ['Body_Grp', 'high']:
                root_node = ns + ":" + root_node
                if mc.objExists(root_node):
                    assets_list.append(root_node)
                    break

    if assets_list:
        tle.export_reference_locator(assets_list)


orig_tran_data = {512: {'tianlangxing:Master_ctrl': [-86029.28891252523, -6136.31884474414, -56573.915097753124],
                        'z90040_cam': [-86022.76698776831, -6123.362745155045, -56594.118941674256]},
                  513: {'tianlangxing:Master_ctrl': [-86012.32914475817, -6078.094109348432, -55253.1710656034],
                        'z90040_cam': [-86006.37665159036, -6065.183103985587, -55272.94577797492]},
                  514: {'tianlangxing:Master_ctrl': [-86006.08080926504, -6017.891322677339, -53941.295522035085],
                        'z90040_cam': [-85998.70148727122, -6005.0573476023865, -53960.61948729635]},
                  515: {'tianlangxing:Master_ctrl': [-86005.18818990888, -5952.7924702369255, -52645.14987317378],
                        'z90040_cam': [-86000.18337048263, -5939.988501073234, -52663.9961993606]},
                  516: {'tianlangxing:Master_ctrl': [-86132.21812374468, -5909.4114203013105, -51426.91120078584],
                        'z90040_cam': [-86129.58346730481, -5898.1323142087585, -51445.348300166756]},
                  517: {'tianlangxing:Master_ctrl': [-86420.03475344206, -5879.822298044248, -50267.14519043325],
                        'z90040_cam': [-86415.81058093335, -5865.146308393574, -50285.129607708455]},
                  518: {'tianlangxing:Master_ctrl': [-86728.72832128602, -5809.297474321237, -49050.29615393456],
                        'z90040_cam': [-86722.88835928767, -5796.601100797875, -49067.84799760489]},
                  519: {'tianlangxing:Master_ctrl': [-86918.3890695616, -5643.109319987759, -47660.80840310803],
                        'z90040_cam': [-86914.59897729546, -5631.557826988739, -47678.20750474662]},
                  520: {'tianlangxing:Master_ctrl': [-86957.93360465056, -5275.9392154023935, -45926.16004993578],
                        'z90040_cam': [-86953.84434691277, -5264.1552962049755, -45943.21246860558]},
                  521: {'tianlangxing:Master_ctrl': [-86962.02614418922, -4732.668411136594, -43953.07587169604],
                        'z90040_cam': [-86957.54768420919, -4720.382563506706, -43969.813183430044]},
                  522: {'tianlangxing:Master_ctrl': [-87001.89682214799, -4153.869083364983, -42044.870178150886],
                        'z90040_cam': [-86998.4197374095, -4141.096763765365, -42061.274694288164]},
                  523: {'tianlangxing:Master_ctrl': [-87412.24793505855, -3680.1134082623294, -40283.925053305626],
                        'z90040_cam': [-87409.7676185575, -3669.2323186769154, -40299.71118989526]},
                  524: {'tianlangxing:Master_ctrl': [-87974.07835705111, -3451.9735620033643, -38787.499996723505],
                        'z90040_cam': [-87971.08064899078, -3442.5418580004493, -38802.401296241456]},
                  525: {'tianlangxing:Master_ctrl': [-88933.5096344001, -3432.4820487437246, -38308.0055438981],
                        'z90040_cam': [-88929.95903652102, -3422.660853200593, -38321.911457945294]},
                  526: {'tianlangxing:Master_ctrl': [-89577.52620686493, -3427.0379516922776, -38094.4252232351],
                        'z90040_cam': [-89574.12803637354, -3416.6513770821107, -38107.26898466777]},
                  527: {'tianlangxing:Master_ctrl': [-90159.5981085554, -3422.232537725173, -37891.40074190733],
                        'z90040_cam': [-90156.4145048057, -3413.135342741074, -37903.14833392371]},
                  528: {'tianlangxing:Master_ctrl': [-90717.86560950684, -3418.0064358867294, -37698.994516887404],
                        'z90040_cam': [-90714.23372813677, -3408.935829375192, -37709.655258795625]},
                  529: {'tianlangxing:Master_ctrl': [-91290.46897975453, -3414.300275221265, -37517.26896514797],
                        'z90040_cam': [-91286.29619233494, -3405.25428691946, -37526.87622142843]},
                  530: {'tianlangxing:Master_ctrl': [-91915.54848933368, -3411.0546847730993, -37346.286503661686],
                        'z90040_cam': [-91911.0161229663, -3402.710269982255, -37354.89411511257]},
                  531: {'tianlangxing:Master_ctrl': [-92631.24440827966, -3408.2102935865505, -37186.10954940116],
                        'z90040_cam': [-92626.25012988572, -3400.582739216666, -37193.821525901054]},
                  532: {'tianlangxing:Master_ctrl': [-93475.69700662773, -3405.707730705938, -37036.800519339056],
                        'z90040_cam': [-93470.02440431462, -3398.50490810283, -37043.7629643463]},
                  533: {'tianlangxing:Master_ctrl': [-94510.42332370178, -3403.7241659942347, -36907.84160093988],
                        'z90040_cam': [-94503.69879326678, -3397.0304000039173, -36914.165962721556]},
                  534: {'tianlangxing:Master_ctrl': [-95722.02657702308, -3402.3714302552594, -36802.33804160498],
                        'z90040_cam': [-95713.8095155765, -3396.2702993769785, -36808.082976758196]},
                  535: {'tianlangxing:Master_ctrl': [-97036.27630392244, -3401.4921439445993, -36710.78684821232],
                        'z90040_cam': [-97026.39803421457, -3395.977424487457, -36716.01447284968]},
                  536: {'tianlangxing:Master_ctrl': [-98378.94204173065, -3400.928927517841, -36623.68502763987],
                        'z90040_cam': [-98367.50659668326, -3395.9088992624975, -36628.46151696011]},
                  537: {'tianlangxing:Master_ctrl': [-99675.79332777887, -3400.5244014305736, -36531.529586765566],
                        'z90040_cam': [-99663.17997273065, -3395.80510470912, -36535.92462623487]},
                  538: {'tianlangxing:Master_ctrl': [-100852.59969939785, -3400.121186138382, -36424.81753246736],
                        'z90040_cam': [-100839.30160519188, -3395.511198242921, -36428.90277491083]},
                  539: {'tianlangxing:Master_ctrl': [-101835.13069391843, -3399.561902096855, -36294.04587162322],
                        'z90040_cam': [-101821.48743726317, -3394.986238224628, -36297.90165767764]},
                  540: {'tianlangxing:Master_ctrl': [-102645.0905059817, -3398.8832347149923, -36149.489868529505],
                        'z90040_cam': [-102631.32232024238, -3394.3078787228624, -36153.20537500707]},
                  541: {'tianlangxing:Master_ctrl': [-103361.78883612814, -3398.247175520066, -36000.428965874424],
                        'z90040_cam': [-103348.00712362549, -3393.6557096886377, -36004.094891854984]},
                  542: {'tianlangxing:Master_ctrl': [-103997.40348053805, -3397.68430414507, -35835.86643812369],
                        'z90040_cam': [-103983.718930026, -3392.9613983440527, -35839.89602834184]},
                  543: {'tianlangxing:Master_ctrl': [-104564.11223539198, -3397.225200223, -35644.805559742956],
                        'z90040_cam': [-104550.63545631875, -3392.216801436902, -35649.6465086416]},
                  544: {'tianlangxing:Master_ctrl': [-105074.0928968702, -3396.9004433868495, -35416.24960519792],
                        'z90040_cam': [-105060.82711340918, -3391.5760409633267, -35421.91844840909]},
                  545: {'tianlangxing:Master_ctrl': [-105539.5232611531, -3396.740613269614, -35139.2018489543],
                        'z90040_cam': [-105526.35826525294, -3391.1688667575563, -35145.288682271814]},
                  546: {'tianlangxing:Master_ctrl': [-105972.58112442112, -3396.701428700659, -34658.00180442387],
                        'z90040_cam': [-105959.23913944783, -3390.9845556975188, -34664.129793972585]},
                  547: {'tianlangxing:Master_ctrl': [-106385.4442828546, -3396.695830905094, -33854.37201345485],
                        'z90040_cam': [-106370.83170160992, -3390.927376450267, -33860.504242619376]},
                  548: {'tianlangxing:Master_ctrl': [-106750.2528054541, -3474.7911013436897, -32852.27766113489],
                        'z90040_cam': [-106727.4721446576, -3471.8813307243345, -32857.68868041041]},
                  549: {'tianlangxing:Master_ctrl': [-107041.41051443385, -3684.9388299925536, -31764.09892280055],
                        'z90040_cam': [-107015.57200776626, -3682.248874660368, -31768.789841547954]},
                  550: {'tianlangxing:Master_ctrl': [-107274.49083579463, -3990.9318928512575, -30617.536100945916],
                        'z90040_cam': [-107248.84739157351, -3988.3041154203156, -30622.74454317578]},
                  551: {'tianlangxing:Master_ctrl': [-107465.06719553717, -4356.563165919342, -29440.2894980651],
                        'z90040_cam': [-107440.7586426875, -4354.0277597249515, -29449.12046854509]},
                  552: {'tianlangxing:Master_ctrl': [-107628.71301966232, -4745.625525196444, -28234.928334743814],
                        'z90040_cam': [-107607.48062082114, -4743.290536098013, -28251.81986625077]},
                  553: {'tianlangxing:Master_ctrl': [-107781.00173417084, -5121.911846682106, -26988.284958567303],
                        'z90040_cam': [-107763.73864335756, -5119.813710757066, -27016.03879442723]},
                  554: {'tianlangxing:Master_ctrl': [-107937.5067650635, -5449.215006375877, -25704.4543625285],
                        'z90040_cam': [-107924.06826837576, -5447.4161655394155, -25744.52320658149]},
                  555: {'tianlangxing:Master_ctrl': [-108085.35484400229, -5771.013229401138, -24387.53153962003],
                        'z90040_cam': [-108075.3666581075, -5769.611370646288, -24441.399521738935]},
                  556: {'tianlangxing:Master_ctrl': [-108201.02938421027, -6137.022062038172, -22999.962301728025],
                        'z90040_cam': [-108194.35471459718, -6136.079627280124, -23069.086630372833]},
                  557: {'tianlangxing:Master_ctrl': [-108284.13883402999, -6520.390362022005, -21552.44471467156],
                        'z90040_cam': [-108280.2841670721, -6519.890063780175, -21636.83577095162]},
                  558: {'tianlangxing:Master_ctrl': [-108334.29164180397, -6894.266987087763, -20121.452152342616],
                        'z90040_cam': [-108332.38667934605, -6894.170396773408, -20221.448177102768]},
                  559: {'tianlangxing:Master_ctrl': [-108351.09625587474, -7231.800794970471, -18783.457988633545],
                        'z90040_cam': [-108349.91643798648, -7232.036535687348, -18897.462240393324]},
                  560: {'tianlangxing:Master_ctrl': [-108351.09621016051, -7506.140643405167, -17605.220121362785],
                        'z90040_cam': [-108348.78226455273, -7506.602730308594, -17728.901670587235]},
                  561: {'tianlangxing:Master_ctrl': [-108351.09612526263, -7690.435390126957, -16546.995185628155],
                        'z90040_cam': [-108346.89998924865, -7690.991741957844, -16677.759530605945]},
                  562: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -15525.504661241506],
                        'z90040_cam': [-108345.0511741434, -7758.319411973361, -15661.98894429436]},
                  563: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -14409.642819421982],
                        'z90040_cam': [-108343.9303411122, -7758.146751745872, -14549.264346188824]},
                  564: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -13195.47959908411],
                        'z90040_cam': [-108343.90459113367, -7757.89145395973, -13336.109145837145]},
                  565: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -11990.499981583229],
                        'z90040_cam': [-108343.89965902151, -7757.578060574955, -12131.741795501897]},
                  566: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -10902.188948274674],
                        'z90040_cam': [-108343.903419963, -7757.271374968904, -11043.74655149952]},
                  567: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -10038.031480513504],
                        'z90040_cam': [-108343.90057136666, -7757.039643325307, -10179.706647379828]},
                  568: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -9505.512559655068],
                        'z90040_cam': [-108343.87549441644, -7756.953241452086, -9647.205038794888]},
                  569: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -9187.122110312008],
                        'z90040_cam': [-108343.3722702742, -7757.300285268172, -9328.74253361128]},
                  570: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -8893.027053695812],
                        'z90040_cam': [-108342.23006498511, -7758.116379323652, -9034.279716721772]},
                  571: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -8622.227866060159],
                        'z90040_cam': [-108340.88270602933, -7759.080168433951, -8762.59140705631]},
                  572: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -8373.725023658713],
                        'z90040_cam': [-108339.7662965277, -7759.863555320969, -8512.45345315698]},
                  573: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -8146.519002745082],
                        'z90040_cam': [-108339.30621840751, -7760.170918532598, -8282.637765930323]},
                  574: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7939.61027957293],
                        'z90040_cam': [-108339.35568110738, -7760.062787308428, -8072.5415756911325]},
                  575: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7751.999330395922],
                        'z90040_cam': [-108339.48429534833, -7759.78098071942, -7881.66030203242]},
                  576: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7582.686631467672],
                        'z90040_cam': [-108339.68653599118, -7759.32871762164, -7708.910778013143]},
                  577: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7430.672659041844],
                        'z90040_cam': [-108339.94830572794, -7758.74880294888, -7553.206847290486]},
                  578: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7294.957889372093],
                        'z90040_cam': [-108340.2588815049, -7758.078753461839, -7413.462634567709]},
                  579: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7174.542798712046],
                        'z90040_cam': [-108340.61304375384, -7757.3351036186305, -7288.592455413581]},
                  580: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -7068.427863315359],
                        'z90040_cam': [-108341.00100170633, -7756.543604081346, -7177.508336467838]},
                  581: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6975.613559435689],
                        'z90040_cam': [-108341.41117169416, -7755.742184916042, -7079.11826669366]},
                  582: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6895.100363326665],
                        'z90040_cam': [-108341.83156471516, -7754.974924855882, -6992.326328007062]},
                  583: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6825.8887512419415],
                        'z90040_cam': [-108342.25775188452, -7754.244019240948, -6916.085012275507]},
                  584: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6766.979199435172],
                        'z90040_cam': [-108342.68536682549, -7753.5507347017565, -6849.584417148335]},
                  585: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6717.372184159991],
                        'z90040_cam': [-108343.1022330118, -7752.926911393361, -6792.107246705396]},
                  586: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6676.068181670053],
                        'z90040_cam': [-108343.49824213742, -7752.39932543517, -6742.950768356146]},
                  587: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6642.067668219003],
                        'z90040_cam': [-108343.86282316475, -7751.989450593508, -6701.402074957327]},
                  588: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6614.371120060487],
                        'z90040_cam': [-108344.18363467765, -7751.73911818348, -6666.715157341919]},
                  589: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6591.979013448152],
                        'z90040_cam': [-108344.45587950594, -7751.631629373265, -6638.100248904716]},
                  590: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6572.804540442348],
                        'z90040_cam': [-108344.67537524758, -7751.571899960824, -6613.2038461384755]},
                  591: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6555.3719445805455],
                        'z90040_cam': [-108344.84098093891, -7751.516796225759, -6590.25086186072]},
                  592: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6539.598279332078],
                        'z90040_cam': [-108344.95916801174, -7751.4623120061515, -6569.298524397105]},
                  593: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6525.400598166281],
                        'z90040_cam': [-108345.03426986694, -7751.4133746474545, -6550.415967009837]},
                  594: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6512.695954552485],
                        'z90040_cam': [-108345.06766237327, -7751.388241668445, -6533.663677252089]},
                  595: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6501.4014019600245],
                        'z90040_cam': [-108345.07468955894, -7751.367439520685, -6519.069124101459]},
                  596: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6491.433993858233],
                        'z90040_cam': [-108345.07120463386, -7751.329398329562, -6506.611064365864]},
                  597: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6482.710783716443],
                        'z90040_cam': [-108345.0589807069, -7751.291024048627, -6495.901995729498]},
                  598: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6475.148825003988],
                        'z90040_cam': [-108345.03117258265, -7751.283839319267, -6486.539880451471]},
                  599: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6468.665171190201],
                        'z90040_cam': [-108344.99091801124, -7751.29095682924, -6478.442845502775]},
                  600: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6463.176875744416],
                        'z90040_cam': [-108344.94059199165, -7751.286262521883, -6471.529972710219]},
                  601: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6458.6009921359655],
                        'z90040_cam': [-108344.86942719981, -7751.275003531815, -6465.721821898907]},
                  602: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6454.854573834183],
                        'z90040_cam': [-108344.76985798792, -7751.252325534289, -6460.939707003678]},
                  603: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6451.8546743084],
                        'z90040_cam': [-108344.62704557824, -7751.222019290364, -6457.076067703192]},
                  604: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6449.518347027953],
                        'z90040_cam': [-108344.43680903531, -7751.163257665081, -6454.005862819288]},
                  605: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6447.762645462172],
                        'z90040_cam': [-108344.22246950035, -7751.085299321835, -6451.623898195491]},
                  606: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6446.504623080393],
                        'z90040_cam': [-108344.00386404707, -7751.0139169939885, -6449.825140510515]},
                  607: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6445.661333351947],
                        'z90040_cam': [-108343.79100340512, -7750.941029954728, -6448.505000470578]},
                  608: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6445.1498297461685],
                        'z90040_cam': [-108343.59969880918, -7750.8708183085855, -6447.558955494784]},
                  609: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.887165732391],
                        'z90040_cam': [-108343.44664187358, -7750.7922722949, -6446.882631617589]},
                  610: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.790394779946],
                        'z90040_cam': [-108343.34870585115, -7750.685727952528, -6446.370202184453]},
                  611: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.3177547701, -7750.581327987448, -6445.917918910234]},
                  612: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.33166241023, -7750.510306753223, -6445.482151211001]},
                  613: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.36242754594, -7750.451794326255, -6445.084940902389]},
                  614: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.40773614548, -7750.394720079974, -6444.723391441621]},
                  615: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.4640385858, -7750.33615437065, -6444.395073250676]},
                  616: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.52924419838, -7750.263785939151, -6444.097474079916]},
                  617: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.5966620878, -7750.194689005117, -6443.827961238766]},
                  618: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.66052953519, -7750.144977977443, -6443.583752546783]},
                  619: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.73184491636, -7750.105908179405, -6443.371961816588]},
                  620: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.81621551278, -7750.072423234066, -6443.201611621613]},
                  621: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.90592410913, -7750.053154404195, -6443.070194134375]},
                  622: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108343.99365358774, -7750.05513628696, -6442.975189227287]},
                  623: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.07137268035, -7750.063643932002, -6442.917129681371]},
                  624: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.13122116066, -7750.067750513604, -6442.896147196767]},
                  625: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.16473046529, -7750.096868485782, -6442.8939491313895]},
                  626: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.178344045, -7750.162596451672, -6442.8926812509835]},
                  627: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.18527148444, -7750.229366521451, -6442.891825597536]},
                  628: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.19887106527, -7750.2653345933695, -6442.890356773476]},
                  629: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.22713943386, -7750.272440375544, -6442.888418529017]},
                  630: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.26180248303, -7750.204211143002, -6442.885567335224]},
                  631: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.29067548395, -7750.135981910462, -6442.883175547275]},
                  632: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108344.30233412042, -7750.135981910462, -6442.881504545052]},
                  633: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108333.06153565292, -7750.278118536966, -6427.950564775241]},
                  634: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776570358168],
                        'z90040_cam': [-108321.82073718542, -7750.42025516347, -6413.0196250054305]},
                  635: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776567280945],
                        'z90040_cam': [-108310.57993871791, -7750.562391789974, -6398.088682158397]},
                  636: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776545740382],
                        'z90040_cam': [-108299.3391402504, -7750.704528416478, -6383.157720848024]},
                  637: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.7764872731395],
                        'z90040_cam': [-108288.0983417829, -7750.846665042982, -6368.226722610971]},
                  638: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776373415879],
                        'z90040_cam': [-108276.8575433154, -7750.988801669486, -6353.2956689839]},
                  639: {'tianlangxing:Master_ctrl': [-108351.0960795484, -7757.8338928708745, -6444.776185705259],
                        'z90040_cam': [-108265.6167448479, -7751.13093829599, -6338.36454150347]},
                  640: {'tianlangxing:Master_ctrl': [-108309.01215637855, -7757.8338928708745, -6394.694396301422],
                        'z90040_cam': [-108172.88748936063, -7751.13093829599, -6383.554135690936]},
                  641: {'tianlangxing:Master_ctrl': [-108238.87228442883, -7757.8338928708745, -6311.224901156202],
                        'z90040_cam': [-108172.88748936063, -7751.13093829599, -6383.554135690936]},
                  642: {'tianlangxing:Master_ctrl': [-108228.82118166295, -7757.830900868591, -6311.140377836787],
                        'z90040_cam': [-108172.88748936063, -7751.13093829599, -6383.554135690936]},
                  415: {'tianlangxing:Master_ctrl': [-109.07621081138804, 159.43823780879643, -3933.928314886863],
                        'z90040_cam': [-83.82681623523159, 1553.6294109425767, -4265.774588747484]},
                  416: {'tianlangxing:Master_ctrl': [-108.95750070246316, 159.43823780879643, -3905.286871086827],
                        'z90040_cam': [-83.82208168742041, 1553.2209586366025, -4265.7756547785275]},
                  417: {'tianlangxing:Master_ctrl': [-108.91248982190382, 159.43823780879643, -3995.355480249257],
                        'z90040_cam': [-83.81111439101721, 1552.9757016455, -4265.78016244482]},
                  418: {'tianlangxing:Master_ctrl': [-109.11267449028276, 1556.9653353147858, -4264.391870961671],
                        'z90040_cam': [-83.80307204420177, 1552.9306822755555, -4265.783885649106]},
                  419: {'tianlangxing:Master_ctrl': [-109.48444601727216, 1556.969202358741, -4821.171406920247],
                        'z90040_cam': [-80.59856295065313, 1550.7675510627898, -4836.066324656223]},
                  420: {'tianlangxing:Master_ctrl': [-109.6846306856511, 1556.9730694026964, -5993.013427393862],
                        'z90040_cam': [-79.8780403096671, 1550.8140759461826, -6007.896980712711]},
                  421: {'tianlangxing:Master_ctrl': [-109.66599920800019, 1557.2601813025983, -8646.650542040712],
                        'z90040_cam': [-79.23148680839329, 1551.3089898955511, -8661.45952686692]},
                  422: {'tianlangxing:Master_ctrl': [-109.62007664557332, 1557.2600594063, -12033.777420692177],
                        'z90040_cam': [-78.72661249230843, 1551.778301700574, -12048.435261960198]},
                  423: {'tianlangxing:Master_ctrl': [-109.56182080415927, 1557.2592061322111, -14592.079250582505],
                        'z90040_cam': [-78.2388333057705, 1552.4858443882379, -14606.501798134437]},
                  424: {'tianlangxing:Master_ctrl': [-109.48379673806394, 1505.62537786712, -16212.004643366867],
                        'z90040_cam': [-77.62662280052895, 1501.6326286425954, -16226.098611524858]},
                  425: {'tianlangxing:Master_ctrl': [-109.39343939298148, 1402.0483183624324, -17825.51634565829],
                        'z90040_cam': [-76.92231673806378, 1398.8517340849367, -17839.180996696297]},
                  426: {'tianlangxing:Master_ctrl': [-109.32801141178291, 1281.9605680657396, -19432.57074712719],
                        'z90040_cam': [-76.23463568857512, 1279.5393435947808, -19445.724187407654]},
                  427: {'tianlangxing:Master_ctrl': [-109.28990000136568, 1225.1315040246852, -21033.124237443568],
                        'z90040_cam': [-75.56953815557935, 1223.3315835628234, -21045.68002212358]},
                  428: {'tianlangxing:Master_ctrl': [-109.25626308557925, 1181.5380576085838, -22627.133206277424],
                        'z90040_cam': [-74.9068403538329, 1180.2504584914905, -22638.981763895794]},
                  429: {'tianlangxing:Master_ctrl': [-109.22651938272284, 1142.331826518898, -24214.55404329917],
                        'z90040_cam': [-74.23665044961112, 1141.5243745074513, -24225.54981076006]},
                  430: {'tianlangxing:Master_ctrl': [-109.20008761109568, 1106.1915935612205, -25795.343138178803],
                        'z90040_cam': [-73.54817858361545, 1105.8408661432647, -25804.722671106272]},
                  431: {'tianlangxing:Master_ctrl': [-109.17638648899701, 1072.9067408314927, -27369.45688058634],
                        'z90040_cam': [-72.82315700320551, 1073.03496972349, -27376.55160775153]},
                  432: {'tianlangxing:Master_ctrl': [-109.15483473472604, 1042.9665911758784, -28936.851660192173],
                        'z90040_cam': [-72.11275462599865, 1043.5744822616002, -28941.253470213058]},
                  433: {'tianlangxing:Master_ctrl': [-109.134851066582, 1018.2068932553923, -30497.483866666316],
                        'z90040_cam': [-71.47747950001707, 1019.3193216610829, -30498.799763278897]},
                  434: {'tianlangxing:Master_ctrl': [-109.1158542028641, 1010.1952383041412, -32051.30988967877],
                        'z90040_cam': [-70.9116799707949, 1011.7870262408574, -32049.20600171779]},
                  435: {'tianlangxing:Master_ctrl': [-109.09696002904828, 1032.9091013459022, -33598.28611889994],
                        'z90040_cam': [-70.36595544073771, 1034.8688333216073, -33592.587609975206]},
                  436: {'tianlangxing:Master_ctrl': [-109.07790159942991, 1057.2334053016239, -35138.368943999834],
                        'z90040_cam': [-69.87774946582684, 1059.4835854865555, -35128.93092190594]},
                  437: {'tianlangxing:Master_ctrl': [-109.05902338553737, 1088.805115204399, -36671.51475464845],
                        'z90040_cam': [-69.47035144462126, 1091.2884736663848, -36658.21494808991]},
                  438: {'tianlangxing:Master_ctrl': [-109.04066985889901, 1129.27858639361, -38197.6799405162],
                        'z90040_cam': [-69.13408532477818, 1131.9356998214134, -38180.41691126431]},
                  439: {'tianlangxing:Master_ctrl': [-109.02318549104324, 1179.9946684201736, -39716.82089127309],
                        'z90040_cam': [-68.89574581524253, 1182.7619970557719, -39695.506053512174]},
                  440: {'tianlangxing:Master_ctrl': [-109.00691475349839, 1242.446742230903, -41228.89399658912],
                        'z90040_cam': [-68.7951971077672, 1245.2867368852924, -41203.45185082263]},
                  441: {'tianlangxing:Master_ctrl': [-108.99220211779286, 1318.4929004088458, -42733.85564613469],
                        'z90040_cam': [-69.06950796308921, 1321.3502663064482, -42704.09629807571]},
                  442: {'tianlangxing:Master_ctrl': [-108.97939205545501, 1410.5731972792094, -44231.662229579815],
                        'z90040_cam': [-69.89480544560921, 1414.0688416427236, -44197.40725453301]},
                  443: {'tianlangxing:Master_ctrl': [-108.96882903801321, 1522.0326192276596, -45722.2701365945],
                        'z90040_cam': [-71.14936762974173, 1525.9616759979886, -45683.58257748227]},
                  444: {'tianlangxing:Master_ctrl': [-108.96085753699586, 1657.6822038986602, -47205.635756849144],
                        'z90040_cam': [-72.7537827617194, 1661.5000603686779, -47162.77643201134]},
                  445: {'tianlangxing:Master_ctrl': [-108.9558220239313, 1824.8897529247467, -48681.71548001375],
                        'z90040_cam': [-74.61392744634153, 1828.1556779876296, -48635.158162548534]},
                  446: {'tianlangxing:Master_ctrl': [-108.95406697034792, 2036.0000386474035, -50150.46569575835],
                        'z90040_cam': [-76.6178171571647, 2038.6841815997482, -50101.79020986715]},
                  447: {'tianlangxing:Master_ctrl': [-109.04043758536383, 2348.6992386128695, -51611.8427937533],
                        'z90040_cam': [-78.74184460430493, 2351.1101729785732, -51562.76350948819]},
                  448: {'tianlangxing:Master_ctrl': [-109.64503189047521, 2783.588953892964, -53065.803163668636],
                        'z90040_cam': [-81.92568608727717, 2785.757493729802, -53018.40885611283]},
                  449: {'tianlangxing:Master_ctrl': [-111.28607357577731, 3304.1359011292643, -54512.30319517436],
                        'z90040_cam': [-86.86773134065199, 3306.0988032768932, -54468.95472450073]},
                  450: {'tianlangxing:Master_ctrl': [-114.48178633136585, 3873.806796963486, -55951.29927794088],
                        'z90040_cam': [-93.54670826954215, 3875.60086981548, -55912.90564801256]},
                  451: {'tianlangxing:Master_ctrl': [-119.7503938473362, 4456.0683580372115, -57382.747801638194],
                        'z90040_cam': [-101.94642216756444, 4457.735884498812, -57348.76096870013]},
                  452: {'tianlangxing:Master_ctrl': [-127.61011981378303, 5014.387300992022, -58806.60515593631],
                        'z90040_cam': [-112.61958745139462, 5015.919554497252, -58776.30538541546]},
                  453: {'tianlangxing:Master_ctrl': [-138.5791879208031, 5512.230342469634, -60222.827730505625],
                        'z90040_cam': [-126.38185594749578, 5513.654517483601, -60196.23966987032]},
                  454: {'tianlangxing:Master_ctrl': [-153.1758218584913, 5913.064199111627, -61631.37191501615],
                        'z90040_cam': [-143.61718898760202, 5914.437527254436, -61608.410675975414]},
                  455: {'tianlangxing:Master_ctrl': [-171.91824531694138, 6180.355587559609, -63032.19409913791],
                        'z90040_cam': [-164.70055796490726, 6181.808878729493, -63012.70435794682]},
                  456: {'tianlangxing:Master_ctrl': [-195.3246819862519, 6277.571224455252, -64425.25067254127],
                        'z90040_cam': [-190.01003662618066, 6279.183758508015, -64408.97726104309]},
                  457: {'tianlangxing:Master_ctrl': [-219.1591426152917, 6182.400061896579, -65625.30758929251],
                        'z90040_cam': [-215.02720101548306, 6184.367220154078, -65611.88573507206]},
                  458: {'tianlangxing:Master_ctrl': [-265.08150599629664, 5903.390492508416, -66509.75468884347],
                        'z90040_cam': [-261.46745219585574, 5906.621752406463, -66498.83290368342]},
                  459: {'tianlangxing:Master_ctrl': [-372.45379788442466, 5450.298393722452, -67172.48418894268],
                        'z90040_cam': [-369.0667367975667, 5453.966320808213, -67163.75658696471]},
                  460: {'tianlangxing:Master_ctrl': [-580.6380440348262, 4832.879642970435, -67707.3883073384],
                        'z90040_cam': [-577.5591004210461, 4836.84390536341, -67700.60274863767]},
                  461: {'tianlangxing:Master_ctrl': [-928.9962702026173, 4060.8901176841787, -68208.359261779],
                        'z90040_cam': [-926.3443205340222, 4065.348884008853, -68202.85665380475]},
                  462: {'tianlangxing:Master_ctrl': [-1456.8905021430076, 3144.085695295283, -68769.28927001292],
                        'z90040_cam': [-1454.4289830703544, 3149.1654657771055, -68764.15157036505]},
                  463: {'tianlangxing:Master_ctrl': [-3094.5177751386727, 1875.8398608376162, -69318.5489736016],
                        'z90040_cam': [-3077.9115054927897, 1881.4347475346376, -69306.79642972887]},
                  464: {'tianlangxing:Master_ctrl': [-6265.3197243109225, 187.54724947104478, -69768.27743961896],
                        'z90040_cam': [-6222.448107331906, 193.57080058530045, -69744.23990540777]},
                  465: {'tianlangxing:Master_ctrl': [-10248.525275173892, -1704.0045361841426, -70188.0195240821],
                        'z90040_cam': [-10191.513095313161, -1697.700891274266, -70157.36565907577]},
                  466: {'tianlangxing:Master_ctrl': [-14323.36335324091, -3582.027893507221, -70647.32008300802],
                        'z90040_cam': [-14267.054461741767, -3575.6225481099277, -70616.97470186402]},
                  467: {'tianlangxing:Master_ctrl': [-18982.96060408216, -5507.136410650351, -71158.11153362282],
                        'z90040_cam': [-18928.43282969362, -5500.6446536478825, -71128.56452433858]},
                  468: {'tianlangxing:Master_ctrl': [-24232.583725204444, -7536.661116015427, -71698.01739453177],
                        'z90040_cam': [-24180.42915590475, -7530.037067194845, -71669.57569419233]},
                  469: {'tianlangxing:Master_ctrl': [-28619.67172002389, -9448.890567355538, -72285.11917382033],
                        'z90040_cam': [-28569.990616314604, -9442.08888246669, -72257.91045748793]},
                  470: {'tianlangxing:Master_ctrl': [-31789.989057975617, -11261.903067416908, -72907.8385341106],
                        'z90040_cam': [-31742.796736254553, -11254.845256385423, -72881.87228034061]},
                  471: {'tianlangxing:Master_ctrl': [-34503.73397833824, -13117.82351147371, -73545.04561215939],
                        'z90040_cam': [-34459.18273282156, -13110.447611859858, -73520.35745778945]},
                  472: {'tianlangxing:Master_ctrl': [-36979.996139291994, -14981.01034607027, -74200.49462725394],
                        'z90040_cam': [-36938.19894453827, -14973.299243930893, -74177.1120468067]},
                  473: {'tianlangxing:Master_ctrl': [-39437.86519901719, -16815.822017750903, -74877.93979868153],
                        'z90040_cam': [-39398.90945855302, -16807.886270102685, -74855.8815705903]},
                  474: {'tianlangxing:Master_ctrl': [-42096.43081569478, -18586.6169730604, -75581.13534572959],
                        'z90040_cam': [-42060.37375729323, -18578.721316631094, -75560.41747711187]},
                  475: {'tianlangxing:Master_ctrl': [-44935.36354125441, -20257.753658543086, -76396.66690175209],
                        'z90040_cam': [-44902.21829658265, -20249.30889320695, -76377.3111055836]},
                  476: {'tianlangxing:Master_ctrl': [-48443.278188520126, -21793.590520743295, -77306.37416283185],
                        'z90040_cam': [-48413.04305894353, -21784.930985380517, -77288.38948655604]},
                  477: {'tianlangxing:Master_ctrl': [-54606.1536895742, -23158.486006205774, -78298.15599993568],
                        'z90040_cam': [-54578.80084271015, -23149.791194888505, -78281.54539415096]},
                  478: {'tianlangxing:Master_ctrl': [-58212.63151726388, -24299.19496343516, -78401.62757775786],
                        'z90040_cam': [-58188.10414123501, -24290.56549717183, -78386.39433282992]},
                  479: {'tianlangxing:Master_ctrl': [-62108.242897396856, -25262.50485869071, -78444.30815290636],
                        'z90040_cam': [-62086.45244814069, -25254.03346410903, -78430.45049550787]},
                  480: {'tianlangxing:Master_ctrl': [-65992.06319053573, -26107.396631131247, -78462.5771720277],
                        'z90040_cam': [-65972.87856928627, -26099.118099994976, -78450.08742232338]},
                  481: {'tianlangxing:Master_ctrl': [-69532.73371654797, -26859.1722258403, -78492.81408176832],
                        'z90040_cam': [-69515.9615626766, -26851.023190629363, -78481.68074723604]},
                  482: {'tianlangxing:Master_ctrl': [-71717.90165170125, -27525.84604842585, -78551.57634104171],
                        'z90040_cam': [-71703.25303935425, -27518.00209491391, -78541.78069028062]},
                  483: {'tianlangxing:Master_ctrl': [-73913.28730759175, -28095.987798183654, -78610.05665969964],
                        'z90040_cam': [-73900.30871051278, -28088.494119660587, -78601.57687903653]},
                  484: {'tianlangxing:Master_ctrl': [-76124.31802834402, -28462.054756480564, -78636.58736079588],
                        'z90040_cam': [-76112.20332627911, -28454.776525334346, -78629.39713722402]},
                  485: {'tianlangxing:Master_ctrl': [-78266.67414983443, -27902.619222662666, -78631.76234457437],
                        'z90040_cam': [-78254.72251335604, -27895.372239462075, -78625.47528799687]},
                  486: {'tianlangxing:Master_ctrl': [-80238.64093521125, -27037.08588502702, -78597.98723102383],
                        'z90040_cam': [-80226.7717734105, -27029.76393643109, -78592.38559277533]},
                  487: {'tianlangxing:Master_ctrl': [-81923.91241001374, -25836.061177251067, -78506.3119228152],
                        'z90040_cam': [-81912.07502816337, -25828.621331394028, -78501.6538030587]},
                  488: {'tianlangxing:Master_ctrl': [-83017.6787754075, -23923.175782789946, -78284.7562870969],
                        'z90040_cam': [-83005.9034759408, -23915.57190701128, -78280.92261492927]},
                  489: {'tianlangxing:Master_ctrl': [-83765.97193356774, -21637.754629774136, -77808.15525533837],
                        'z90040_cam': [-83754.91028374738, -21629.93609600658, -77804.8318433415]},
                  490: {'tianlangxing:Master_ctrl': [-84614.24792658107, -19476.905487653738, -76585.21323263203],
                        'z90040_cam': [-84604.14320632645, -19468.8910565868, -76582.00729170264]},
                  491: {'tianlangxing:Master_ctrl': [-86110.92344122207, -18685.569254076097, -75903.7421529173],
                        'z90040_cam': [-86101.3032863766, -18677.456702527757, -75900.57672127608]},
                  492: {'tianlangxing:Master_ctrl': [-87110.05086384628, -18437.352630017926, -75403.51901531557],
                        'z90040_cam': [-87100.7984726289, -18429.15095132987, -75400.37549732241]},
                  493: {'tianlangxing:Master_ctrl': [-88027.57319300927, -18252.38942703519, -74818.87329411585],
                        'z90040_cam': [-88018.7883580786, -18243.519614285477, -74815.77286540592]},
                  494: {'tianlangxing:Master_ctrl': [-89034.61814688289, -17840.573719910168, -73630.86671281322],
                        'z90040_cam': [-89026.1009829388, -17831.051842489494, -73627.93456609247]},
                  495: {'tianlangxing:Master_ctrl': [-89309.86034122045, -16824.46846559459, -72829.11890162608],
                        'z90040_cam': [-89296.64066293494, -16814.59139141238, -72826.59441388097]},
                  496: {'tianlangxing:Master_ctrl': [-89495.95793890211, -15765.763452641979, -72035.2038874449],
                        'z90040_cam': [-89477.10986686281, -15755.544416158062, -72034.14044244867]},
                  497: {'tianlangxing:Master_ctrl': [-89576.48970758183, -14678.707271322593, -71501.1657012322],
                        'z90040_cam': [-89556.33560703909, -14668.150035937982, -71502.9123503763]},
                  498: {'tianlangxing:Master_ctrl': [-89632.67405495222, -13577.54851190641, -71028.36277340501],
                        'z90040_cam': [-89612.03862350427, -13566.696036032026, -71033.58521904916]},
                  499: {'tianlangxing:Master_ctrl': [-89668.2171461893, -12476.535764663688, -70533.62828322093],
                        'z90040_cam': [-89647.5117719326, -12465.392903321976, -70542.83975155644]},
                  500: {'tianlangxing:Master_ctrl': [-89686.82514646913, -11389.917619864678, -69983.8579180446],
                        'z90040_cam': [-89667.00514797469, -11378.43564054325, -69997.78839608768]},
                  501: {'tianlangxing:Master_ctrl': [-89692.20422096773, -10331.942667779356, -69323.4530359201],
                        'z90040_cam': [-89674.60347635829, -10320.14050643394, -69342.6160950362]},
                  502: {'tianlangxing:Master_ctrl': [-89653.67289809517, -9263.653007447421, -68361.43099946482],
                        'z90040_cam': [-89638.95815694863, -9251.57036416179, -68385.54258565581]},
                  503: {'tianlangxing:Master_ctrl': [-89505.816913226, -8247.875407707212, -67164.58781856472],
                        'z90040_cam': [-89496.34437719236, -8235.481929354786, -67193.7383583191]},
                  504: {'tianlangxing:Master_ctrl': [-89200.24324198291, -7451.535463526701, -66005.69028500184],
                        'z90040_cam': [-89194.50166720375, -7438.914450084297, -66037.61347973424]},
                  505: {'tianlangxing:Master_ctrl': [-88660.09493680713, -6986.270557746446, -65011.62149385],
                        'z90040_cam': [-88654.24352026975, -6973.549685589555, -65042.97252696388]},
                  506: {'tianlangxing:Master_ctrl': [-87962.22894525752, -6740.443307525999, -64055.49835003556],
                        'z90040_cam': [-87956.12034534571, -6727.650758046689, -64085.36038883367]},
                  507: {'tianlangxing:Master_ctrl': [-87288.82308563315, -6546.067159312107, -63029.43836011941],
                        'z90040_cam': [-87282.37747045282, -6533.25488885275, -63057.24863974513]},
                  508: {'tianlangxing:Master_ctrl': [-86617.39678729558, -6399.564329033413, -61825.35291646622],
                        'z90040_cam': [-86610.610465495, -6386.749473675235, -61850.901087398124]},
                  509: {'tianlangxing:Master_ctrl': [-86197.99397083969, -6328.304888218361, -60520.74406443565],
                        'z90040_cam': [-86190.9500477981, -6315.44488987724, -60544.17055742125]},
                  510: {'tianlangxing:Master_ctrl': [-86116.76560942901, -6258.50621968516, -59214.563003294694],
                        'z90040_cam': [-86109.60869718493, -6245.571936670271, -59236.363789205105]},
                  511: {'tianlangxing:Master_ctrl': [-86062.31582870318, -6195.483543358399, -57896.66621235864],
                        'z90040_cam': [-86055.33525554168, -6182.507083793189, -57917.47406176662]}}

start_frame = 418
end_frame = 640


def set_orig_tran_data():
    for f in range(start_frame, end_frame):
        mc.currentTime(f)
        for obj in orig_tran_data[f]:
            mc.xform(obj, t=orig_tran_data[f][obj], ws=True)
            for attr in ['tx', 'ty', 'tz']:
                mc.setKeyframe(obj + '.' + attr)


new_tran_map = {}


def tran_key():
    temp_loc = "tianlangxing_Body_Grp_loc"

    move_object = ["tianlangxing:Master_ctrl", "tianlangxing_didi:Master_ctrl", "z90040_cam"]
    # move_object = ["tianlangxing:Master_ctrl"]

    for f in range(start_frame, end_frame):
        new_tran_map[f] = {}
        mc.currentTime(f)
        for obj in move_object:
            temp_loc_tran = mc.xform(temp_loc, t=True, q=True, ws=True)
            # obj_tran = mc.xform(obj, t=True, q=True, ws=True)
            obj_tran = [mc.getAttr(obj + '.' + attr) for attr in ['tx', 'ty', 'tz']]

            new_tran = [obj_tran[i] - temp_loc_tran[i] for i in range(3)]

            print("----", obj, "----")
            print("frame:", f)
            print("obj_tran:", obj_tran)
            print("temp_loc_tran", temp_loc_tran)
            print("new_tran: ", new_tran)
            print("------------")

            new_tran_map[f][obj] = new_tran

            # mc.xform(obj, t=new_tran, ws=True)

            # for attr in ['tx', 'ty', 'tz', 'rx', 'ry', 'rz', 'sx', 'sy', 'sz']:
            #     mc.setKeyframe(obj + '.' + attr)


def key_tran():
    for f, data in new_tran_map.items():
        mc.currentTime(f)
        obj = data.keys()[0]
        value = data.values()[0]
        print(obj, data)
        mc.xform(obj, t=value, ws=True)

        for attr in ['tx', 'ty', 'tz']:
            mc.setKeyframe(obj + '.' + attr)

# p = "Z:/OCT/TEC/yangtao/main_code"
#
# import pymel.core as pm
# import sys
# import re
# p in sys.path or sys.path.append(p)
# from runner.fgt import transform_locs
# reload(transform_locs)
#
# transform_locs.tran_key()
# transform_locs.key_tran()
#
# transform_locs.set_orig_tran_data()